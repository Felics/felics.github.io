<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Git配置和常用命令</title>
  <meta name="description" content="Git是一个分布式版本控制／软件配置管理软件，原来是linux内核开发者林纳斯·托瓦兹（Linus Torvalds）为了更好地管理linux内核开发而创立的。">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Git配置和常用命令">
  <meta name="twitter:description" content="Git是一个分布式版本控制／软件配置管理软件，原来是linux内核开发者林纳斯·托瓦兹（Linus Torvalds）为了更好地管理linux内核开发而创立的。">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Git配置和常用命令">
  <meta property="og:description" content="Git是一个分布式版本控制／软件配置管理软件，原来是linux内核开发者林纳斯·托瓦兹（Linus Torvalds）为了更好地管理linux内核开发而创立的。">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/git-configs-and-cammands/">
  <link rel="alternate" type="application/rss+xml" title="Trendy Man" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 Trendy Man 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Trendy Man logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Trendy Man" class="blog-button">Trendy Man</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">a backend developer</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">万物之中 希望至美 至美之物 永不凋零</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">Life@Shanghai Work@Meituan</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/princecharming" title="@princecharming 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/trendystar" title="@trendystar 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  
  <!-- Twitter -->
  <li class="navigation__item">
    <a href="http://twitter.com/huangthink" title="@huangthink" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>
  

  

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:huangthink@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-gray-lightest"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2014-04-25 10:28:49 +0800" itemprop="datePublished" class="post-meta__date date">2014-04-25</time> &#8226; <span class="post-meta__tags tags">能工巧匠</span>
    </div>
    <h1 class="post-title">Git配置和常用命令</h1>
  </header>

  <section class="post">
    <p>Git是一个分布式版本控制／软件配置管理软件，原来是linux内核开发者林纳斯·托瓦兹（Linus Torvalds）为了更好地管理linux内核开发而创立的。</p>

<!-- more -->

<h3 id="git配置">Git配置</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git config <span class="nt">--global</span> user.name <span class="s2">"felics"</span>
git config <span class="nt">--global</span> user.email <span class="s2">"huangthink@gmail.com"</span>
git config <span class="nt">--global</span> color.ui <span class="nb">true
</span>git config <span class="nt">--global</span> alias.co checkout
git config <span class="nt">--global</span> alias.ci commit
git config <span class="nt">--global</span> alias.st status
git config <span class="nt">--global</span> alias.br branch
git config <span class="nt">-l</span>  <span class="c"># 列举所有配置</span></code></pre></figure>

<p>用户的git配置文件在<code class="highlighter-rouge">~/.gitconfig</code>，我的配置：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cat</span> .gitconfig 
<span class="o">[</span>user]
	email <span class="o">=</span> huangthink@gmail.com
	name <span class="o">=</span> felics
<span class="o">[</span>color]
	ui <span class="o">=</span> auto
<span class="o">[</span>color <span class="s2">"branch"</span><span class="o">]</span>
	current <span class="o">=</span> yellow reverse
	<span class="nb">local</span> <span class="o">=</span> yellow
	remote <span class="o">=</span> green
<span class="o">[</span>color <span class="s2">"diff"</span><span class="o">]</span>
	meta <span class="o">=</span> yellow bold
	frag <span class="o">=</span> magenta bold
	old <span class="o">=</span> red bold
	new <span class="o">=</span> green bold
<span class="o">[</span>color <span class="s2">"status"</span><span class="o">]</span>
	added <span class="o">=</span> yellow
	changed <span class="o">=</span> green
	untracked <span class="o">=</span> cyan
<span class="o">[</span><span class="nb">alias</span><span class="o">]</span>
	st <span class="o">=</span> <span class="s2">"status"</span>
	co <span class="o">=</span> checkout
	<span class="nb">ls</span> <span class="o">=</span> <span class="s2">"ls-files"</span>
	ci <span class="o">=</span> commit
	br <span class="o">=</span> branch
	rt <span class="o">=</span> reset <span class="nt">--hard</span>
	unstage <span class="o">=</span> reset HEAD
	uncommit <span class="o">=</span> reset <span class="nt">--soft</span> HEAD^
	l <span class="o">=</span> log <span class="nt">--pretty</span><span class="o">=</span>oneline <span class="nt">--abbrev-commit</span> <span class="nt">--graph</span> <span class="nt">--decorate</span>
   amend <span class="o">=</span> commit <span class="nt">--amend</span> 
   <span class="nb">who</span> <span class="o">=</span> shortlog <span class="nt">-n</span> <span class="nt">-s</span> <span class="nt">--no-merges</span> 
	g <span class="o">=</span> <span class="nb">grep</span> <span class="nt">-n</span> <span class="nt">--color</span> <span class="nt">-E</span> 
	<span class="nb">cp</span> <span class="o">=</span> cherry-pick <span class="nt">-x</span> 
	cb <span class="o">=</span> checkout <span class="nt">-b</span> 
<span class="o">[</span>core]
	filemode <span class="o">=</span> <span class="nb">true</span></code></pre></figure>

<h3 id="git常用命令">Git常用命令</h3>

<h4 id="查看帮助命令">查看、帮助命令</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git <span class="nb">help</span> &lt;<span class="nb">command</span><span class="o">&gt;</span>  <span class="c"># 显示command的help</span>
git show            <span class="c"># 显示某次提交的内容</span>
git show <span class="nv">$id</span></code></pre></figure>

<h4 id="查看提交记录">查看提交记录</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git log
git log &lt;file&gt;      <span class="c"># 查看该文件每次提交记录</span>
git log <span class="nt">-p</span> &lt;file&gt;   <span class="c"># 显示版本历史，以及版本间的内容差异</span>
git log <span class="nt">-p</span> <span class="nt">-2</span>       <span class="c"># 查看最近两次详细修改内容的diff</span>
git log <span class="nt">--stat</span>      <span class="c"># 查看提交统计信息</span>
git log <span class="nt">--since</span><span class="o">=</span><span class="s2">"6 hours"</span>  <span class="c"># 显示最近6小时提交</span>
git log <span class="nt">--before</span><span class="o">=</span><span class="s2">"2 days"</span>  <span class="c"># 显示2天前提交</span>
git log <span class="nt">-1</span> HEAD~3          <span class="c"># 显示比HEAD早3个提交的那个提交</span>
git log <span class="nt">-1</span> HEAD^^^
git reflog				   <span class="c"># 查看操作记录</span></code></pre></figure>

<h3 id="添加提交删除找回重置修改文件">添加、提交、删除、找回，重置修改文件</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git co  <span class="nt">--</span> &lt;file&gt;   <span class="c"># 抛弃工作区修改</span>
git co  <span class="nb">.</span>           <span class="c"># 抛弃工作区修改</span>
git co HEAD &lt;file&gt;  <span class="c"># 抛弃工作目录区中文件的修改</span>
	
git add &lt;file&gt;      <span class="c"># 将工作文件修改提交到本地暂存区</span>
git add <span class="nb">.</span>           <span class="c"># 将所有修改过的工作文件提交暂存区</span>
	
git <span class="nb">rm</span> &lt;file&gt;       <span class="c"># 从版本库中删除文件</span>
git <span class="nb">rm</span> &lt;file&gt; <span class="nt">--cached</span>  <span class="c"># 从版本库中删除文件，但不删除文件</span>
	
git reset &lt;file&gt;    <span class="c"># 从暂存区恢复到工作文件</span>
git reset <span class="nt">--</span> <span class="nb">.</span>      <span class="c"># 从暂存区恢复到工作文件</span>
git reset <span class="nt">--hard</span>  HEAD^ <span class="c"># 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改</span>
git reset <span class="nt">--hard</span> &lt;commit <span class="nb">id</span><span class="o">&gt;</span>  <span class="c"># 恢复到某一次提交的状态</span>
git reset HEAD &lt;file&gt; <span class="c"># 抛弃暂存区中文件的修改</span>
	
git ci &lt;file&gt;
git ci <span class="nb">.</span>
git ci <span class="nt">-a</span>           <span class="c"># 将git add, git rm和git ci等操作都合并在一起做</span>
git ci <span class="nt">-am</span> <span class="s2">"some comments"</span>
git ci <span class="nt">--amend</span>      <span class="c"># 修改最后一次提交记录</span>
	
git revert &lt;<span class="nv">$id</span><span class="o">&gt;</span>    <span class="c"># 恢复某次提交的状态，恢复动作本身也创建了一次提交对象</span>
git revert HEAD     <span class="c"># 恢复最后一次提交的状态</span></code></pre></figure>

<h4 id="查看文件diff">查看文件diff</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git diff &lt;file&gt;     <span class="c"># 比较当前文件和暂存区文件差异</span>
git diff
git diff &lt;<span class="nv">$id1</span><span class="o">&gt;</span> &lt;<span class="nv">$id2</span><span class="o">&gt;</span>   	<span class="c"># 比较两次提交之间的差异</span>
git diff &lt;branch1&gt;..&lt;branch2&gt;   <span class="c"># 在两个分支之间比较 </span>
git diff <span class="nt">--staged</span>   <span class="c"># 比较暂存区和版本库差异</span>
git diff <span class="nt">--cached</span>   <span class="c"># 比较暂存区和版本库差异</span>
git diff <span class="nt">--stat</span>     <span class="c"># 仅仅比较统计信息</span></code></pre></figure>

<h3 id="git-本地分支管理">Git 本地分支管理</h3>

<h4 id="查看切换创建和删除分支">查看、切换、创建和删除分支</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git br <span class="nt">-r</span>           <span class="c"># 查看远程分支</span>
git br <span class="nt">-v</span>           <span class="c"># 查看各个分支最后提交信息</span>
git br <span class="nt">-a</span>           <span class="c"># 列出所有分支</span>
git br <span class="nt">--merged</span>     <span class="c"># 查看已经被合并到当前分支的分支</span>
git br <span class="nt">--no-merged</span>  <span class="c"># 查看尚未被合并到当前分支的分支</span>
git br &lt;new_branch&gt; <span class="c"># 基于当前分支创建新的分支</span>
git br &lt;new_branch&gt;  &lt;start_point&gt;		<span class="c"># 基于另一个起点（分支名称，提交名称或则标签名称），创建新的分支</span>
git br <span class="nt">-f</span> &lt;existing_branch&gt;  &lt;start_point&gt; <span class="c"># 创建同名新分支，覆盖已有分支</span>
git br <span class="nt">-d</span> &lt;branch&gt;  <span class="c"># 删除某个分支</span>
git br <span class="nt">-D</span> &lt;branch&gt;  <span class="c"># 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</span>
	
git co &lt;branch&gt;     	<span class="c"># 切换到某个分支</span>
git co <span class="nt">-b</span> &lt;new_branch&gt; 	<span class="c"># 创建新的分支，并且切换过去</span>
git co <span class="nt">-b</span> &lt;new_branch&gt; &lt;branch&gt;  	  <span class="c"># 基于branch创建新的new_branch</span>
git co <span class="nt">-m</span> &lt;existing_branch&gt; &lt;new_branch&gt;  <span class="c"># 移动或重命名分支，当新分支不存在时</span>
git co <span class="nt">-M</span> &lt;existing_branch&gt; &lt;new_branch&gt;  <span class="c"># 移动或重命名分支，当新分支存在时就覆盖</span>
	
git co <span class="nv">$id</span>         		 <span class="c"># 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除</span>
git co <span class="nv">$id</span> <span class="nt">-b</span> &lt;new_branch&gt;       <span class="c"># 把某次历史提交记录checkout出来，创建成一个分支</span></code></pre></figure>

<h4 id="分支合并和rebase">分支合并和rebase</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git merge &lt;branch&gt;                  <span class="c"># 将branch分支合并到当前分支</span>
git merge origin/master <span class="nt">--no-ff</span>     <span class="c"># 不要Fast-Foward合并，这样可以生成merge提交</span>
git merge <span class="nt">--no-commit</span> &lt;branch&gt;      <span class="c"># 合并但不提交</span>
git merge <span class="nt">--squash</span> &lt;branch&gt;         <span class="c"># 把一条分支上的内容合并到另一个分支上的一个提交</span>
	
git rebase master &lt;branch&gt;          <span class="c"># 将master rebase到branch，相当于：git co &lt;branch&gt; &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge &lt;branch&gt;</span></code></pre></figure>

<h4 id="git补丁管理">Git补丁管理</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git diff <span class="o">&gt;</span> ../sync.patch         <span class="c"># 生成补丁</span>
git apply ../sync.patch          <span class="c"># 打补丁</span>
git apply <span class="nt">--check</span> ../sync.patch  <span class="c"># 测试补丁能否成功</span>
git format-patch <span class="nt">-X</span>              <span class="c"># 根据提交的log生成patch，X为数字，表示最近的几个日志</span></code></pre></figure>

<h4 id="git暂存管理">Git暂存管理</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git stash                        <span class="c"># 暂存</span>
git stash list                   <span class="c"># 列所有stash</span>
git stash apply                  <span class="c"># 恢复暂存的内容</span>
git stash drop                   <span class="c"># 删除暂存区</span></code></pre></figure>

<h4 id="git远程分支管理">Git远程分支管理</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git pull                         <span class="c"># 抓取远程仓库所有分支更新并合并到本地</span>
git pull <span class="nt">--no-ff</span>                 <span class="c"># 抓取远程仓库所有分支更新并合并到本地，不要快进合并</span>
git fetch origin                 <span class="c"># 抓取远程仓库所有更新</span>
git fetch origin remote-branch:local-branch <span class="c">#抓取remote-branch分支的更新</span>
git fetch origin <span class="nt">--tags</span> 		 <span class="c"># 抓取远程上的所有分支</span>
git checkout <span class="nt">-b</span> &lt;new-branch&gt; &lt;remote_tag&gt; <span class="c"># 抓取远程上的分支</span>
git merge origin/master          <span class="c"># 将远程主分支合并到本地当前分支</span>
git co <span class="nt">--track</span> origin/branch     <span class="c"># 跟踪某个远程分支创建相应的本地分支</span>
git co <span class="nt">-b</span> &lt;local_branch&gt; origin/&lt;remote_branch&gt;  <span class="c"># 基于远程分支创建本地分支，功能同上</span>
	
git push                         <span class="c"># push所有分支</span>
git push origin master           <span class="c"># 将本地主分支推到远程主分支</span>
git push <span class="nt">-u</span> origin master        <span class="c"># 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)</span>
git push origin &lt;local_branch&gt;   <span class="c"># 创建远程分支， origin是远程仓库名</span>
git push origin &lt;local_branch&gt;:&lt;remote_branch&gt;  <span class="c"># 创建远程分支</span>
git push origin :&lt;remote_branch&gt;  <span class="c">#先删除本地分支(git br -d &lt;branch&gt;)，然后再push删除远程分支</span></code></pre></figure>

<h4 id="git远程仓库管理">Git远程仓库管理</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git remote <span class="nt">-v</span>                    <span class="c"># 查看远程服务器地址和仓库名称</span>
git remote show origin           <span class="c"># 查看远程服务器仓库状态</span>
git remote add origin git@github:XXX/test.git         <span class="c"># 添加远程仓库地址</span>
git remote set-url origin git@github.com:XXX/test.git <span class="c"># 设置远程仓库地址(用于修改远程仓库地址)</span>
git remote <span class="nb">rm</span> &lt;repository&gt;       <span class="c"># 删除远程仓库</span>
git remote set-head origin master   <span class="c"># 设置远程仓库的HEAD指向master分支</span>
	
git branch <span class="nt">--set-upstream</span> master origin/master
git branch <span class="nt">--set-upstream</span> develop origin/develop</code></pre></figure>

<h3 id="实例">实例</h3>

<h5 id="打patch过程">打patch过程</h5>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git add <span class="nb">.</span>
git status
git diff <span class="nt">--cached</span> <span class="o">&gt;</span>XXX.patch
git ci <span class="nt">-m</span> <span class="s1">'add patch'</span></code></pre></figure>


  </section>
</article>

<!--<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/github-octopress/" title="link to 用Octopress在Github搭建个人博客">用Octopress在Github搭建个人博客</a></h2>
       <p class="excerpt">一、安装Octopress运行的必要软件1.Octopress官网及软件下载：      官方首页：http://octopress.org        这里是RubyInstaller下载地址 （码：aurm）。        这里是DevKit下载地址 （码：vkd5）。  2.安装RubyInstaller3.安装DevKit4.启动Ruby命令框，用CD的命令进入你存放DevKit的目录中，执行以下命令继续安装ruby dk.rb initruby dk.rb install二、...&hellip;</p>
       <div class="post-list__meta"><time datetime="2014-06-06 20:38:02 +0800" class="post-list__meta--date date">2014-06-06</time> &#8226; <span class="post-list__meta--tags tags">能工巧匠</span><a class="btn-border-small" href=/github-octopress/>继续阅读</a></div>
   </div>
   
   
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/git-configs-and-cammands/";
        this.page.identifier = "/git-configs-and-cammands/";
    };

    var disqus_shortname = 'felics';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>
-->

            <section class="footer">
    <footer>
    	<span class="footer__copyright">&copy; 2021  Trendy Man.  本博客由<a href="https://jekyllrb.com"> Jekyll </a>生成 使用<a href="https://github.com/onevcat/vno-jekyll"> Vno-Jekyll </a>作为主题</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
